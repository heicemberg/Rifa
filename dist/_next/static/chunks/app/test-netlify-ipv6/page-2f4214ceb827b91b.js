(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{4482:(e,s,n)=>{Promise.resolve().then(n.bind(n,7277))},7277:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>a});var r=n(5155),i=n(2115),t=n(7965),o=n(2099),l=n(7358);function a(){let[e,s]=(0,i.useState)(null),[n,a]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{d({isNetlify:!!("true"===l.env.NETLIFY||l.env.CONTEXT),hasWindow:!0,userAgent:navigator.userAgent,timestamp:new Date().toISOString()})},[]);let m=async()=>{a(!0);try{let e;console.log("\uD83E\uDDEA Iniciando test completo de conexi\xf3n...");let n=await (0,t.wT)();try{e=await (0,o.zk)()}catch(s){e={success:!1,error:s instanceof Error?s.message:"Error legacy connection"}}let r={netlifyOptimized:n,legacyConnection:{success:e},comparison:{improvement:n.success&&!e?"FIXED":n.success===e?"SAME":"REGRESSION",recommendation:n.success?"Usar configuraci\xf3n optimizada para Netlify":"Revisar configuraci\xf3n IPv6"},timestamp:new Date().toISOString()};s(r),console.log("\uD83D\uDCCA Test completo:",r)}catch(e){console.error("❌ Error en test:",e),s({error:e instanceof Error?e.message:"Unknown error",timestamp:new Date().toISOString()})}finally{a(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"\uD83D\uDD2C Test Soluci\xf3n IPv6/Netlify"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Informaci\xf3n del Entorno"}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded p-4",children:(0,r.jsx)("pre",{className:"text-sm text-blue-800 whitespace-pre-wrap",children:c?JSON.stringify(c,null,2):"Cargando..."})})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("button",{onClick:m,disabled:n,className:`px-6 py-3 rounded-lg font-semibold text-white transition-colors ${n?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:n?"\uD83D\uDD04 Probando conexi\xf3n...":"\uD83E\uDDEA Ejecutar Test de Conexi\xf3n"})}),e&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:"Resultados del Test"}),(0,r.jsxs)("div",{className:`border rounded-lg p-4 ${e.netlifyOptimized?.success?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:e.netlifyOptimized?.success?"✅ Conexi\xf3n Exitosa":"❌ Conexi\xf3n Fallida"}),(0,r.jsx)("p",{className:"text-sm text-gray-700",children:e.netlifyOptimized?.success?"La nueva configuraci\xf3n IPv4/Netlify funciona correctamente":`Error: ${e.netlifyOptimized?.error||"Error desconocido"}`})]}),e.comparison&&(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDCCA An\xe1lisis de Mejora"}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Resultado:"})," ",e.comparison.improvement]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Recomendaci\xf3n:"})," ",e.comparison.recommendation]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2",children:"\uD83D\uDD27 Detalles T\xe9cnicos"}),(0,r.jsx)("pre",{className:"text-xs text-gray-600 whitespace-pre-wrap overflow-auto max-h-64",children:JSON.stringify(e,null,2)})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-semibold mb-2 text-blue-800",children:"\uD83D\uDCA1 Explicaci\xf3n de la Soluci\xf3n"}),(0,r.jsxs)("div",{className:"text-sm text-blue-700 space-y-2",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Problema:"})," Netlify no soporta IPv6 nativamente, pero Supabase Direct Connection usa IPv6"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Soluci\xf3n:"})," Detecci\xf3n autom\xe1tica de entorno Netlify y configuraci\xf3n optimizada"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"T\xe9cnica:"})," Headers especiales, timeouts extendidos, y fetch optimizado"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Resultado esperado:"})," Conexi\xf3n estable en Netlify sin cambios en desarrollo local"]})]})]})]})]})})})}}},e=>{e.O(0,[354,99,441,964,358],()=>e(e.s=4482)),_N_E=e.O()}]);