(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[858],{3404:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>r});var a=n(5155),l=n(2115),i=n(2099);function r(){let[e,s]=(0,l.useState)(null),[n,r]=(0,l.useState)("⏳ Preparando..."),[t,d]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async()=>{let e=[],n=[];try{let a;n.push("\uD83D\uDD04 Iniciando diagn\xf3stico...");let l={hasSupabaseUrl:!0,hasSupabaseKey:!0,supabaseUrlPreview:"https://ugmfmnwbynppdzkhvrih.supabase.co".substring(0,30)+"...",supabaseKeyPreview:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVnbWZtbndieW5wcGR6a2h2cmloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU4ODE4NzAsImV4cCI6MjA3MTQ1Nzg3MH0.MTNKqQCzmRETjULZ2PRx8mTK3hpR90tn6Pz36h1nMR4".substring(0,15)+"...",nodeEnv:"production",userAgent:window.navigator.userAgent,location:window.location.href,isNetlify:window.location.hostname.includes("netlify"),windowSupabaseUrl:window.__SUPABASE_URL__,windowSupabaseKey:window.__SUPABASE_KEY__?.substring(0,15)+"...",hasWindowVars:!!window.__SUPABASE_URL__,buildTime:new Date().toISOString()};n.push("✅ Informaci\xf3n del entorno recopilada");try{a=(0,i.HF)(),n.push("✅ Estado de conexi\xf3n obtenido")}catch(s){a={hasInstance:!1,attempts:0,url:"Error getting status",environment:"unknown"},e.push(`Error obteniendo estado: ${s}`)}s({environment:l,connection:a,errors:e,logs:n}),n.push("\uD83D\uDD04 Iniciando test de conexi\xf3n avanzado..."),r("\uD83D\uDD04 Probando conexi\xf3n a Supabase...");try{let s=await (0,i.LC)();s.success?(n.push("✅ Test de conexi\xf3n exitoso"),r("✅ Conexi\xf3n exitosa a Supabase - Database respondiendo correctamente")):(n.push(`❌ Test de conexi\xf3n fall\xf3: ${s.error}`),r(`❌ Error: ${s.error}`),e.push(`Test de conexi\xf3n fall\xf3: ${s.error}`),s.details&&e.push(`Detalles: ${JSON.stringify(s.details,null,2)}`)),await (0,i.jB)()?n.push("✅ Inicializaci\xf3n adicional exitosa"):n.push("⚠️ Inicializaci\xf3n adicional fall\xf3 pero conexi\xf3n directa funciona")}catch(s){n.push(`❌ Error cr\xedtico de conexi\xf3n: ${s}`),r(`❌ Error cr\xedtico: ${s}`),e.push(`Error cr\xedtico de conexi\xf3n: ${s}`)}s(s=>s?{...s,errors:e,logs:n}:null)}catch(s){console.error("Error en diagn\xf3stico:",s),r(`❌ Error general: ${s}`),e.push(`Error general: ${s}`)}finally{d(!1)}})()},[]),t)?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-yellow-500 mx-auto"}),(0,a.jsx)("h1",{className:"text-3xl font-bold mt-8",children:"Ejecutando Diagn\xf3stico..."})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"text-center border-b border-gray-700 pb-8",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-yellow-500 mb-4",children:"\uD83D\uDD0D Debug Netlify - Rifa Silverado Z71"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Diagn\xf3stico de conexi\xf3n Supabase en Netlify"})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-yellow-500 mb-4",children:"\uD83D\uDD17 Test de Conexi\xf3n"}),(0,a.jsx)("div",{className:"text-xl p-4 rounded bg-gray-700",children:n})]}),e&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-blue-400 mb-4",children:"\uD83C\uDF0D Variables de Entorno"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"NODE_ENV:"}),(0,a.jsx)("span",{className:"ml-2 text-yellow-400",children:e.environment.nodeEnv})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Es Netlify:"}),(0,a.jsx)("span",{className:`ml-2 ${e.environment.isNetlify?"text-green-400":"text-gray-400"}`,children:e.environment.isNetlify?"✅ S\xed":"❌ No"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"User Agent:"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-300 text-sm",children:[e.environment.userAgent.substring(0,80),"..."]})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-600 pt-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-blue-300 mb-2",children:"Variables process.env"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-semibold mr-2",children:"SUPABASE_URL:"}),e.environment.hasSupabaseUrl?(0,a.jsx)("span",{className:"text-green-400",children:"✅ Configurada"}):(0,a.jsx)("span",{className:"text-red-400",children:"❌ NO configurada"}),(0,a.jsx)("span",{className:"ml-4 text-gray-300 font-mono text-sm",children:e.environment.supabaseUrlPreview})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-semibold mr-2",children:"SUPABASE_KEY:"}),e.environment.hasSupabaseKey?(0,a.jsx)("span",{className:"text-green-400",children:"✅ Configurada"}):(0,a.jsx)("span",{className:"text-red-400",children:"❌ NO configurada"}),(0,a.jsx)("span",{className:"ml-4 text-gray-300 font-mono text-sm",children:e.environment.supabaseKeyPreview})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-600 pt-4",children:[(0,a.jsx)("h4",{className:"text-lg font-semibold text-purple-300 mb-2",children:"Variables window (Runtime)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"font-semibold mr-2",children:"Window Variables:"}),e.environment.hasWindowVars?(0,a.jsx)("span",{className:"text-green-400",children:"✅ Disponibles"}):(0,a.jsx)("span",{className:"text-red-400",children:"❌ NO disponibles"})]}),(0,a.jsxs)("div",{className:"ml-4 space-y-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-mono text-sm text-gray-400",children:"__SUPABASE_URL__:"}),(0,a.jsxs)("span",{className:"ml-2 text-gray-300 font-mono text-xs",children:[e.environment.windowSupabaseUrl?.substring(0,40)||"N/A","..."]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-mono text-sm text-gray-400",children:"__SUPABASE_KEY__:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-300 font-mono text-xs",children:e.environment.windowSupabaseKey||"N/A"})]})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-600 pt-4",children:[(0,a.jsx)("span",{className:"font-semibold text-gray-400",children:"Build Time:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-300 font-mono text-sm",children:e.environment.buildTime})]})]})]}),e&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-purple-400 mb-4",children:"⚡ Estado de Conexi\xf3n Supabase"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Cliente Inicializado:"}),(0,a.jsx)("span",{className:`ml-2 ${e.connection.hasInstance?"text-green-400":"text-red-400"}`,children:e.connection.hasInstance?"✅ S\xed":"❌ No"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Intentos de Conexi\xf3n:"}),(0,a.jsx)("span",{className:"ml-2 text-yellow-400",children:e.connection.attempts})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("span",{className:"font-semibold",children:"URL:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-300 font-mono text-sm",children:e.connection.url})]})]})]}),e&&e.errors.length>0&&(0,a.jsxs)("div",{className:"bg-red-900/50 border border-red-500 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-red-400 mb-4",children:"❌ Errores Detectados"}),(0,a.jsx)("div",{className:"space-y-2",children:e.errors.map((e,s)=>(0,a.jsx)("div",{className:"bg-red-800/50 p-3 rounded font-mono text-sm",children:e},s))})]}),e&&(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-green-400 mb-4",children:"\uD83D\uDCCB Logs de Diagn\xf3stico"}),(0,a.jsx)("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:e.logs.map((e,s)=>(0,a.jsx)("div",{className:"text-sm font-mono text-gray-300 p-1",children:e},s))})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-orange-400 mb-4",children:"\uD83D\uDD27 Manual de Soluci\xf3n"}),(0,a.jsxs)("div",{className:"prose prose-invert text-sm space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-yellow-400",children:"1. Variables de Entorno en Netlify"}),(0,a.jsxs)("p",{children:["Ve a: ",(0,a.jsx)("code",{className:"bg-gray-700 px-2 py-1 rounded",children:"Site Settings → Environment Variables"})]}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-gray-300",children:[(0,a.jsx)("li",{children:"NEXT_PUBLIC_SUPABASE_URL = https://ugmfmnwbynppdzkhvrih.supabase.co"}),(0,a.jsx)("li",{children:"NEXT_PUBLIC_SUPABASE_ANON_KEY = (tu clave completa)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-yellow-400",children:"2. Redeploy"}),(0,a.jsxs)("p",{children:["Despu\xe9s de configurar las variables, haz un ",(0,a.jsx)("strong",{children:"nuevo deploy"})," (no republish)"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-yellow-400",children:"3. Verificar Logs"}),(0,a.jsx)("p",{children:"Revisa los logs de deploy y function logs en Netlify Dashboard"})]})]})]}),(0,a.jsxs)("div",{className:"text-center text-gray-500 text-sm border-t border-gray-700 pt-8",children:[(0,a.jsxs)("p",{children:["Generado: ",new Date().toLocaleString()]}),(0,a.jsx)("p",{children:"Rifa Silverado Z71 2024 - Debug v1.0"})]})]})})}},6423:(e,s,n)=>{Promise.resolve().then(n.bind(n,3404))}},e=>{e.O(0,[354,99,441,964,358],()=>e(e.s=6423)),_N_E=e.O()}]);