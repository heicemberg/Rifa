"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[249],{5249:(e,t,n)=>{n.d(t,{Ay:()=>p,dW:()=>d});var i=n(5155),a=n(2115),s=n(5726),r=n(9434);let o={click:{frequency:800,duration:.1,volume:.3,type:"square",envelope:{attack:.01,decay:.02,sustain:.3,release:.07}},success:{frequency:523,duration:.6,volume:.4,type:"sine",envelope:{attack:.02,decay:.1,sustain:.7,release:.4}},error:{frequency:200,duration:.4,volume:.5,type:"sawtooth",envelope:{attack:.01,decay:.05,sustain:.8,release:.3}},notification:{frequency:660,duration:.2,volume:.3,type:"sine",envelope:{attack:.01,decay:.05,sustain:.6,release:.1}},purchase:{frequency:440,duration:.8,volume:.4,type:"sine",envelope:{attack:.05,decay:.2,sustain:.5,release:.5}}},l=(0,a.createContext)(null),u=()=>{let e=(0,a.useContext)(l);return e||(console.warn("useSounds: No se encontr\xf3 SoundProvider, usando funcionalidad limitada"),{playSound:()=>{},enabled:!1,setEnabled:()=>{},volume:0,setVolume:()=>{},isAudioInitialized:!1})};class c{async initialize(){if(this.isInitialized)return!0;try{return this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.masterGain=this.audioContext.createGain(),this.masterGain.connect(this.audioContext.destination),"suspended"===this.audioContext.state&&await this.audioContext.resume(),this.isInitialized=!0,!0}catch(e){return console.warn("Error inicializando audio:",e),!1}}async playSound(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this.isInitialized||!this.audioContext||!this.masterGain)return;let n=o[e],i=this.audioContext.currentTime;try{let a=this.audioContext.createOscillator(),s=this.audioContext.createGain();a.type=n.type,a.frequency.setValueAtTime(n.frequency,i),a.connect(s),s.connect(this.masterGain);let r=n.envelope;if(r){let e=i+r.attack,a=e+r.decay,o=i+n.duration-r.release,l=i+n.duration;s.gain.setValueAtTime(0,i),s.gain.linearRampToValueAtTime(n.volume*t,e),s.gain.linearRampToValueAtTime(n.volume*r.sustain*t,a),s.gain.setValueAtTime(n.volume*r.sustain*t,o),s.gain.linearRampToValueAtTime(0,l)}else s.gain.setValueAtTime(n.volume*t,i),s.gain.linearRampToValueAtTime(0,i+n.duration);a.start(i),a.stop(i+n.duration),"success"===e&&setTimeout(()=>{this.audioContext&&this.masterGain&&this.playHarmony([659,784],.3,.6*t)},100),"purchase"===e&&setTimeout(()=>{this.audioContext&&this.masterGain&&this.playHarmony([523,659,784],.4,.7*t)},200)}catch(e){console.warn("Error reproduciendo sonido:",e)}}playHarmony(e,t,n){if(!this.audioContext||!this.masterGain)return;let i=this.audioContext.currentTime;e.forEach((e,a)=>{let s=this.audioContext.createOscillator(),r=this.audioContext.createGain();s.type="sine",s.frequency.setValueAtTime(e,i),s.connect(r),r.connect(this.masterGain),r.gain.setValueAtTime(.5*n,i),r.gain.linearRampToValueAtTime(0,i+t),s.start(i+.05*a),s.stop(i+t)})}setMasterVolume(e){this.masterGain&&this.masterGain.gain.setValueAtTime(e,this.audioContext.currentTime)}destroy(){this.audioContext&&(this.audioContext.close(),this.audioContext=null,this.masterGain=null,this.isInitialized=!1)}constructor(){this.audioContext=null,this.masterGain=null,this.isInitialized=!1}}let d=e=>{let{children:t}=e,[n,s]=(0,a.useState)(!0),[r,o]=(0,a.useState)(.7),[u,d]=(0,a.useState)(!1),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{m.current=new c;let e=async()=>{m.current&&d(await m.current.initialize())},t=()=>{e(),document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t)};return document.addEventListener("click",t),document.addEventListener("keydown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("click",t),document.removeEventListener("keydown",t),document.removeEventListener("touchstart",t),m.current&&m.current.destroy()}},[]),(0,a.useEffect)(()=>{m.current&&u&&m.current.setMasterVolume(n?r:0)},[r,n,u]);let h=(0,a.useCallback)(e=>{n&&u&&m.current&&m.current.playSound(e,r)},[n,r,u]);return(0,i.jsx)(l.Provider,{value:{playSound:h,enabled:n,setEnabled:s,volume:r,setVolume:o,isAudioInitialized:u},children:t})},m=()=>{let{playSound:e,enabled:t}=u(),{selectedTickets:n,liveActivities:i,soldTickets:r,errors:o}=(0,s.vW)(),l=(0,a.useRef)([]),c=(0,a.useRef)([]),d=(0,a.useRef)([]),m=(0,a.useRef)([]);return(0,a.useEffect)(()=>{if(!t)return;let i=l.current;n.length>i.length?e("click"):n.length<i.length&&e("click"),l.current=[...n]},[n,t,e]),(0,a.useEffect)(()=>{if(!t)return;let n=c.current;i.length>n.length&&e("notification"),c.current=[...i]},[i,t,e]),(0,a.useEffect)(()=>{if(!t)return;let n=d.current;r.length>n.length&&e("purchase"),d.current=[...r]},[r,t,e]),(0,a.useEffect)(()=>{if(!t)return;let n=m.current;o.length>n.length&&e("error"),m.current=[...o]},[o,t,e]),null},h=()=>{let{enabled:e,setEnabled:t,volume:n,setVolume:s,isAudioInitialized:o}=u(),[l,c]=(0,a.useState)(!1);return o?(0,i.jsx)("div",{className:"fixed bottom-4 left-4 z-40",children:(0,i.jsxs)("div",{className:(0,r.cn)("bg-white border border-gray-200 rounded-lg shadow-lg transition-all duration-300",{"p-2":!l,"p-4":l}),children:[(0,i.jsx)("button",{onClick:()=>{c(!l),l||t(!e)},className:(0,r.cn)("flex items-center justify-center w-10 h-10 rounded-lg transition-all duration-200",{"bg-blue-100 text-blue-600 hover:bg-blue-200":e,"bg-gray-100 text-gray-400 hover:bg-gray-200":!e}),title:e?"Sonidos activados":"Sonidos desactivados",children:e?"\uD83D\uDD0A":"\uD83D\uDD07"}),l&&(0,i.jsxs)("div",{className:"mt-3 space-y-3 min-w-[140px]",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Sonidos"}),(0,i.jsx)("button",{onClick:()=>t(!e),className:(0,r.cn)("relative w-10 h-6 rounded-full transition-colors duration-200",{"bg-blue-500":e,"bg-gray-300":!e}),children:(0,i.jsx)("div",{className:(0,r.cn)("absolute top-1 w-4 h-4 bg-white rounded-full transition-transform duration-200",{"left-5":e,"left-1":!e})})})]}),e&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-xs text-gray-600",children:"Volumen"}),(0,i.jsxs)("span",{className:"text-xs text-gray-800 font-medium",children:[Math.round(100*n),"%"]})]}),(0,i.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:n,onChange:e=>s(parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider"})]}),e&&(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Test:"}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-1",children:[(0,i.jsx)(x,{type:"click",label:"Click"}),(0,i.jsx)(x,{type:"success",label:"\xc9xito"}),(0,i.jsx)(x,{type:"error",label:"Error"}),(0,i.jsx)(x,{type:"notification",label:"Notif"})]})]})]})]})}):null},x=e=>{let{type:t,label:n}=e,{playSound:a}=u();return(0,i.jsx)("button",{onClick:()=>a(t),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:n})},y=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m,{}),(0,i.jsx)(h,{})]});y.displayName="SoundEffects",d.displayName="SoundProvider",m.displayName="SoundEffectsListener",h.displayName="SoundControls";let p=y}}]);